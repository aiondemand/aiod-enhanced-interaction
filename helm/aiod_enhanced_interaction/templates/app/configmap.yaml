apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "aiod-enhanced-interaction.app.fullname" . }}-config
  labels:
    {{- include "aiod-enhanced-interaction.app.labels" . | nindent 4 }}
data:
  # ConfigMap keys match FastAPI environment variable names exactly
  # This allows using envFrom to import all values at once

  # API configuration
  API_VERSION: "/v2"
  USE_GPU: "false"

  # Metadata filtering
  METADATA_FILTERING__ENABLED: "true"
  METADATA_FILTERING__ENFORCE_ENUMS: "false"

  # AIoD configuration
  AIOD__URL: "https://aiod-rest-api-ncsr.dev.deployai.eu/v2"
  AIOD__COMMA_SEPARATED_ASSET_TYPES: "datasets,ml_models,publications,educational_resources"
  AIOD__COMMA_SEPARATED_ASSET_TYPES_FOR_METADATA_EXTRACTION: "datasets,ml_models,publications,educational_resources"
  AIOD__WINDOW_SIZE: "1000"
  AIOD__TESTING: "true"

  # Milvus configuration
  MILVUS__COLLECTION_PREFIX: "aiod"
  MILVUS__STORE_CHUNKS: "true"

  # Mongo configuration
  MONGO__DBNAME: "aiod"

  # Chatbot configuration
  CHATBOT__USE_CHATBOT: "true"
  CHATBOT__MISTRAL_MODEL: "mistral-medium-latest"
  CHATBOT__TOP_K_ASSETS_TO_SEARCH: "10"
  CHATBOT__MYLIBRARY_URL: "https://mylibrary.aiod.eu"

  # Crawler configuration
  CRAWLER__COMMA_SEPARATED_WEBSITES: "https://aiod.eu"
  CRAWLER__COMMA_SEPARATED_API_WEBSITES: "https://aiondemand.github.io/AIOD-rest-api,https://api.aiod.eu"
  CRAWLER__COMMA_SEPARATED_BLOCKED_WEBSITES: "https://auth.aiod.eu"

  # Ollama configuration
  OLLAMA__MODEL_NAME: "qwen3:4b-instruct"
  OLLAMA__MAX_TOKENS: "1024"

  # Optional: Logfire configuration
  LOGFIRE_TOKEN: "pylf_v1_eu_WmrbKyzWn5sbz7PQw11W6jd7n1h0pr9SZnRz8HMT0rXR"
